@model TableModel

<div class="overflow-x-auto">
    <table class="table table-xs table-pin-rows table-pin-cols">
        <thead>
            <tr>
                @foreach (var column in Model.Columns)
                {
                    <td>@column</td>
                }
            </tr>
        </thead>
        <tbody id="table-body"></tbody>
    </table>
</div>

<script asp-location="AspLocation.Footer">
    $(function () {
        search()
    });

    function search() {
        var columns = [@foreach (var column in Model.Columns)
    {
        <text>'@column',</text>
    }];
        var tableBody = $('#table-body');

        var postData = {};
        addCsrfToken(postData);
        toggleLoader();

        $.ajax({
            url: '@(Url.Action("List", "Customer"))',
            type: 'POST',
            data: postData,
            success: function (response) {
                console.log(response);
                $.each(response, function (row) {
                    var tr = $('<tr>');
                    $.each(columns, function (col) {
                        tr.append($('<td>', {
                            'text': row[col]
                        }));
                    });
                    console.log(tr);
                    tableBody.append(tr);
                });
            },
            error: function (xhr, status, error) {

            },
            complete: function (xhr, status) {
                toggleLoader();
            }
        });
    }
</script>